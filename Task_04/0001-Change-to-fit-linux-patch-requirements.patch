From a3fb2021cf9580a1932617ff3e84cf32bc24f731 Mon Sep 17 00:00:00 2001
From: Chinmay Nivsarkar <mit.chinmayn@gmail.com>
Date: Tue, 6 Sep 2016 14:39:07 +0530
Subject: [PATCH] Change to fit linux patch requirements

Signed-off-by: Chinmay Nivsarkar <mit.chinmayn@gmail.com>
---
 Task_04/coding_style.c | 74 +++++++++++++++++++++++---------------------------
 1 file changed, 34 insertions(+), 40 deletions(-)

diff --git a/Task_04/coding_style.c b/Task_04/coding_style.c
index 9fd8f59..365d563 100644
--- a/Task_04/coding_style.c
+++ b/Task_04/coding_style.c
@@ -1,40 +1,34 @@
-#include <linux/module.h>
-#include <linux/kernel.h>
-#include <asm/delay.h>
-#include <linux/slab.h>
-
-int do_work( int * my_int, int retval ) {
-	int x;
-	int y=*my_int;
-	int z;
-	
-	for(x=0;x< * my_int;++x) {
-		udelay(10);
-	}
-
-	if (y < 10 )
-		// That was a long sleep, tell userspace about it
-		printk("We slept a long time!");
-
-	z = x * y;
-
-	return z;
-}
-
-int
-my_init (void)
-{
-	int x = 10;
-
-	x = do_work(&x, x);
-
-	return x;
-}
-
-void my_exit( void )
-{
-	return;
-}
-
-module_init(my_init);
-module_exit(my_exit);
+#include <linux/module.h>
+#include <linux/kernel.h>
+#include <linux/delay.h>
+#include <linux/slab.h>
+
+int do_work(int *my_int, int retval)
+{
+	int x;
+	int y = *my_int;
+	int z;
+
+	for (x = 0; x < *my_int; ++x)
+		udelay(10);
+	if (y < 10)
+		// That was a long sleep, tell userspace about it
+		pr_debug("We slept a long time!");
+	z = x * y;
+	return z;
+}
+
+int my_init(void)
+{
+	int x = 10;
+
+	x = do_work(&x, x);
+	return x;
+}
+
+void my_exit(void)
+{
+}
+
+module_init(my_init);
+module_exit(my_exit);
-- 
2.9.3

